---
title: node版本管理工具——nvm安装配置
date: 2018-09-22 21:43:08
categories:
- 教程
tags:
- node
- 开发工具
---

## 前言
现代前端框架的插件引入和打包构建都是基于node环境，因此对于前端童鞋来说，配置安装配置node环境也是必须要掌握的基本技能。

一般来讲，直接从node官网上下载开发平台相关的安装包或二进制文件进行安装，就能满足正常的开发需求。但是随着node版本的不断完善和快速迭代，许多主流的前端框架会在较大的迭代版本中支持这些新出的特性，所以一些框架或插件会对项目运行时的最低node版本存在要求，如果低于该版本，则会编译报错。某些情况下，某些老项目插件在较高node版本时，也可能报错。因此，直接安装单一node版本的弊端就出现了，如果两个项目在高版本node和低版本node相互不兼容的情况下需要同时进行开发调试，不能灵活切换node版本会严重影响开发效率。

接下来就要介绍本期的主角—— nvm，它支持Windows/MacOS/Linux等多种开发平台，<!-- more -->安装方式也十分简（sha）单（gua），本文主要讲下windows环境下的安装和配置
## 安装nvm
### windows
安装nvm-windows [下载](https://github.com/coreybutler/nvm-windows/releases)

## nvm设置淘宝镜像源
安装完成后，在nvm安装目录中找到settings.txt文件，在后面加上：
``` bash
node_mirror: http://npm.taobao.org/mirrors/node/  # 设置node镜像下载源地址
npm_mirror: https://npm.taobao.org/mirrors/npm/  # 设置npm镜像下载源地址
```
提示：如果不设置淘宝镜像源，可能由于网络错误导致node或npm下载缓慢甚至失败！

## 使用nvm安装node
``` bash
$ nvm install 'node版本号'  # 安装指定node版本
$ nvm use 'node版本号'  # 切换当前node版本
```

## 设置npm全局安装和缓存目录
``` bash
$ npm config set prefix "E:\node\npm-global"  # 设置全局安装目录
$ npm config set cache "E:\node\npm-cache"  # 设置全局缓存目录
```

## 为npm全局安装配置环境变量
如果希望在node版本切换后，之前全局安装的npm插件依然能够正常使用，需要在系统环境变量里增加 NPM_HOME 变量，变量值是npm全局安装目录，需要放在其他nvm自动配置的变量前面

## npm设置淘宝镜像源
``` bash
# npm
$ npm config set registry https://registry.npm.taobao.org --global  # 插件库镜像源
$ npm config set disturl https://npm.taobao.org/dist --global   # node源代码镜像源
# 安装cnpm
$ npm install -g cnpm --registry=https://registry.npm.taobao.org
#一些难下载的包
$ npm config set sass_binary_site https://npm.taobao.org/mirrors/node-sass/ # node-sass插件
$ npm config set phantomjs_cdnurl https://npm.taobao.org/mirrors/phantomjs/ # phantomjs插件
```




